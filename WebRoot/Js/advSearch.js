function FiledsChged(n,t){var i=n.id.substr(n.id.length-1),f=n.options[n.selectedIndex],u=f.getAttribute("fType"),r=$("#w_dplOper"+i),e;u=="Boolean"?($f("w_dplYN"+i).style.display="inline",$f("w_tb1_"+i).style.display="none",$f("span"+i).style.display="none",r[0].selectedIndex=0,r.prop("disabled",!0)):($f("w_dplYN"+i).style.display="none",$f("w_tb1_"+i).style.display="inline",r.removeProp("disabled")),t||$("#w_tb1_"+i+",#w_tb2_"+i).val(""),$("#w_tb1_"+i+",#w_tb2_"+i).unbind().focus(checkThis),u=="DateTime"?(e=f.getAttribute("strFormat"),$("#w_tb1_"+i).focus(function(){WdatePicker({onpicked:function(){try{$f("w_tb2_"+i).focus()}catch(n){}},dateFmt:e,errDealMode:3,enableInputMask:!1})}),$("#w_tb2_"+i).focus(function(){WdatePicker({dateFmt:e,errDealMode:3,enableInputMask:!1})}),$("option.DatePart",r).length==0&&arr[i].appendTo("#w_dplOper"+i)):f.getAttribute("IsList")=="1"?$("#w_tb1_"+i).focus(showOptions).blur(function(){setTimeout("textBlur("+i+")",10)}):u=="Double"&&$("#w_tb1_"+i+",#w_tb2_"+i).numeric({allow:".+-"}),u!="DateTime"&&$("option.DatePart",r).length>0&&(arr[i]=$("#w_dplOper"+i+" option.DatePart").remove()),symChged(r[0])}function textBlur(n){var t="ddl_"+$("#w_dplFileds"+n).val();document.activeElement.id!=t&&$("#"+t).hide()}function showOptions(){var t=this.id.substr(this.id.length-1),n;lastFocusBoxID="w_tb1_"+t,n=$(this).offset(),$("#ddl_"+$("#w_dplFileds"+t).val()).change(function(){$.browser.safari&&$("#"+lastFocusBoxID).val($(this).val()),$(this).hide()}).click(function(){$("#"+lastFocusBoxID).val($(this).val())}).css({position:"absolute",display:"block",width:this.offsetWidth+"px",left:n.left+"px",top:n.top+this.offsetHeight+"px"}).blur(function(){$.browser.safari||$(this).hide()})}function InitFilter(){for(var t=1,n=1;n<=5;n++)$f("w_dplFileds"+n).selectedIndex>0&&(t=n);for(n=1;n<=t;n++)$f("Cond"+n).className="show",FiledsChged($f("w_dplFileds"+n),!0),symChged($f("w_dplOper"+n))}function symChged(n){var t=n.id.substr(n.id.length-1),i=$(n).val();$("#span"+t).css("display",i=="介于"?"inline":"none"),n.options[n.selectedIndex].className=="DatePart"?($("#s"+t).hide(),$("#w_d_"+t).show()):($("#s"+t).show(),$("#w_d_"+t).hide(),inited||setTimeout(function(){$("#w_tb1_"+t).trigger("focus")},0)),$("#w_tb3_"+t).css("display",i=="Last"||i=="Future"?"inline":"none")}function addCond(){return $f("Cond3").className=="hide"?($f("Cond3").className="show",!1):$f("Cond4").className=="hide"?($f("Cond4").className="show",!1):($f("Cond5").className=="hide"&&($f("Cond5").className="show",$f("addCond").className="hide"),!1)}function setAutoCheck(){$("li select,li :text,li :radio","ul.cond").focus(checkThis)}function checkThis(){$(this).closest("li").find(":checkbox").prop("checked",!0)}function CancelFilter(){var n=window.dialogArguments||opener;try{n.CancelFilter()}catch(t){}window.close()}function setUser(n){$(n).prev(":text").val($(n).val()),n.selectedIndex=0}var lastFocusBoxID,inited=!0,arr=new Array(5);$(function(){$("select[id^='w_dplFileds']").each(function(){FiledsChged(this,!0)}),$.browser.safari&&(document.onclick=function(){$(document.activeElement).is("#"+lastFocusBoxID+",select[id^='ddl_']")||$("select[id^='ddl_']").hide()}),inited=!1})